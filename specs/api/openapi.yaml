openapi: 3.0.0
info:
  title: Example API
  description: |
    ⚠️ EXAMPLE API specification for the boilerplate.
    
    This is an EXAMPLE OpenAPI specification demonstrating the structure.
    Replace this with your actual API specification.
    
    This OpenAPI specification is the source of truth for API development.
    AI tools can read this spec to generate controllers, DTOs, and validation code.
    
    See code examples:
    - TypeScript: specs/examples/typescript/
    - Python: specs/examples/python/
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com

servers:
  - url: http://localhost:3000
    description: Development server
  - url: https://api.example.com
    description: Production server

tags:
  - name: Health
    description: Health check endpoints
  - name: Authentication
    description: User authentication and session management
  - name: Users
    description: User profile management

paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Returns server health status
      operationId: getHealth
      responses:
        '200':
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-16T12:00:00Z"

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login with credentials
      description: Authenticate user with username/password
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            examples:
              loginExample:
                $ref: '#/components/examples/loginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                successExample:
                  $ref: '#/components/examples/loginSuccess'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '429':
          description: Too many requests
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /users:
    get:
      tags:
        - Users
      summary: List users
      description: Get a list of users with pagination
      operationId: listUsers
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: List of users
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

components:
  schemas:
    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          example: alice
        password:
          type: string
          format: password
          example: securePassword123

    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            token:
              type: string
              example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
            expiresAt:
              type: string
              format: date-time
              example: "2025-01-17T12:00:00Z"
        error:
          type: object
          nullable: true

    User:
      type: object
      properties:
        id:
          type: string
          example: "user_123abc"
        username:
          type: string
          example: alice
        email:
          type: string
          format: email
          example: alice@example.com
        createdAt:
          type: string
          format: date-time
          example: "2025-01-01T00:00:00Z"

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "INVALID_CREDENTIALS"
            message:
              type: string
              example: "Invalid username or password"

    Pagination:
      type: object
      properties:
        page:
          type: integer
          example: 1
        limit:
          type: integer
          example: 20
        total:
          type: integer
          example: 100
        totalPages:
          type: integer
          example: 5

  parameters:
    PageParam:
      name: page
      in: query
      description: Page number
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1

    LimitParam:
      name: limit
      in: query
      description: Items per page
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

  examples:
    loginRequest:
      summary: Login request example
      value:
        username: alice
        password: securePassword123

    loginSuccess:
      summary: Login success response
      value:
        success: true
        data:
          token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          expiresAt: "2025-01-17T12:00:00Z"
        error: null

